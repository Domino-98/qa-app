import{u as A,a as x,c as z,b as w,d as B,e as S,f as h,s as V,r as Z,g as f,o as i,h as l,i as o,w as v,v as M,j as s,k as n,t as L,l as u,m as c}from"./index.d9765205.js";const $={class:"container auth"},H=o("h1",{class:"form__auth-header"},"Zmie\u0144 has\u0142o",-1),q={class:"form__auth-group"},D=o("label",{for:"password-new",class:"form__auth-label"},"Nowe has\u0142o",-1),E=["type"],N={class:"error-msg"},R=o("path",{fill:"currentColor",d:"M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.46L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.76C18.94,14.82 20.06,13.54 20.82,12C19.17,8.64 15.76,6.5 12,6.5C10.91,6.5 9.84,6.68 8.84,7L7.3,5.47C8.74,4.85 10.33,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C12.69,17.5 13.37,17.43 14,17.29L11.72,15C10.29,14.85 9.15,13.71 9,12.28L5.6,8.87C4.61,9.72 3.78,10.78 3.18,12Z"},null,-1),U=[R],j=o("path",{fill:"currentColor",d:"M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"},null,-1),F=[j],T={class:"form__auth-group"},O=o("label",{for:"password-repeat",class:"form__auth-label"},"Powt\xF3rz nowe has\u0142o",-1),G=["type"],I={class:"error-msg"},J=o("path",{fill:"currentColor",d:"M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.46L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.76C18.94,14.82 20.06,13.54 20.82,12C19.17,8.64 15.76,6.5 12,6.5C10.91,6.5 9.84,6.68 8.84,7L7.3,5.47C8.74,4.85 10.33,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C12.69,17.5 13.37,17.43 14,17.29L11.72,15C10.29,14.85 9.15,13.71 9,12.28L5.6,8.87C4.61,9.72 3.78,10.78 3.18,12Z"},null,-1),K=[J],Q=o("path",{fill:"currentColor",d:"M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"},null,-1),W=[Q],X=o("button",{type:"Submit",class:"form__auth-btn"},"Zmie\u0144 has\u0142o",-1),e1={setup(Y){const d=A(),g=x(),y=z({newPassword:w().required("Has\u0142o jest wymagane").min(8,"Has\u0142o musi zawiera\u0107 min. 8 znak\xF3w"),newPassword2:w().required("Musisz potwierdzi\u0107 has\u0142o").oneOf([B("newPassword"),null],"Has\u0142a musz\u0105 by\u0107 takie same")}),{handleSubmit:b}=S({validationSchema:y}),{value:_,errorMessage:k}=h("newPassword"),{value:m,errorMessage:P}=h("newPassword2"),C=b(async p=>{try{const{error:e,data:r}=await V.auth.api.updateUser(g.query["/#access_token"],{password:p.newPassword});if(e)throw e;Z.push({name:"Home"}),d.commit("successMsg","Pomy\u015Blnie zmieniono has\u0142o!"),setTimeout(()=>{d.commit("successMsg","")},3e3)}catch(e){d.commit("errorMsg",e.message),setTimeout(()=>{d.commit("errorMsg","")},3e3)}});let t=f(!1),a=f(!1);return(p,e)=>(i(),l("main",$,[o("form",{class:"form__auth",onSubmit:e[6]||(e[6]=u((...r)=>s(C)&&s(C)(...r),["prevent"]))},[H,o("div",q,[D,v(o("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>n(_)?_.value=r:null),type:s(t)?"text":"password",id:"password-new",class:"form__auth-input"},null,8,E),[[M,s(_)]]),o("span",N,L(s(k)),1),s(t)?c("",!0):(i(),l("svg",{key:0,class:"form__auth-icon",viewBox:"0 0 24 24",onClick:e[1]||(e[1]=u(r=>n(t)?t.value=!s(t):t=!s(t),["prevent"]))},U)),s(t)?(i(),l("svg",{key:1,class:"form__auth-icon",viewBox:"0 0 24 24",onClick:e[2]||(e[2]=u(r=>n(t)?t.value=!s(t):t=!s(t),["prevent"]))},F)):c("",!0)]),o("div",T,[O,v(o("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>n(m)?m.value=r:null),type:s(a)?"text":"password",id:"password-repeat",class:"form__auth-input"},null,8,G),[[M,s(m)]]),o("span",I,L(s(P)),1),s(a)?c("",!0):(i(),l("svg",{key:0,class:"form__auth-icon",viewBox:"0 0 24 24",onClick:e[4]||(e[4]=u(r=>n(a)?a.value=!s(a):a=!s(a),["prevent"]))},K)),s(a)?(i(),l("svg",{key:1,class:"form__auth-icon",viewBox:"0 0 24 24",onClick:e[5]||(e[5]=u(r=>n(a)?a.value=!s(a):a=!s(a),["prevent"]))},W)):c("",!0)]),X],32)]))}};export{e1 as default};
